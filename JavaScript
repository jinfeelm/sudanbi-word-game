rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // 'scores' 컬렉션에 대한 규칙
    // 컬렉션 전체에 대한 읽기를 허용하여 랭킹 조회가 가능하도록 합니다.
    match /scores/{document=**} {
      allow read;
    }

    // '쓰기(write)'는 자기 자신의 문서(userId)에만 가능하게 합니다.
    match /scores/{userId} {
      allow write: if request.auth.uid == userId;
    }

    // 'seasons' 컬렉션에 대한 읽기 규칙을 추가합니다.
    // 클라이언트가 게임 단어 목록을 불러올 수 있도록 허용합니다.
    match /seasons/{seasonId} {
      allow read;
    }

    // 'emails' 컬렉션에 대한 규칙
    match /emails/{emailId} {
      // 이메일은 한번 제출하면 끝!
      allow read, update, delete: if false;
      // '생성(create)'은 로그인한 사용자라면 누구나 가능하게 허용합니다.
      allow create: if request.auth != null;
    }
  }
}