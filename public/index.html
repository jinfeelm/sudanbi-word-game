<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <!-- viewport-fit=cover: ì•„ì´í° ë…¸ì¹˜ ì˜ì—­ê¹Œì§€ ë°°ê²½ ì±„ì›€ -->
    <!-- user-scalable=no: ì‹¤ìˆ˜ë¡œ í™”ë©´ í™•ëŒ€ ë°©ì§€ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>2026 ìˆ˜ë‹¨ë¹„ ë‹¨ì–´ ì±Œë¦°ì§€</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ†</text></svg>">

    <!-- Pretendard Font & Tailwind -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>

    <style>
        /* Pretendard í°íŠ¸ ì ìš© & ê¸°ë³¸ ì„¤ì • */
        body { 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            -webkit-font-smoothing: antialiased; 
            -moz-osx-font-smoothing: grayscale;
            
            /* ğŸ“± ëª¨ë°”ì¼ í•„ìˆ˜ ìµœì í™” */
            overscroll-behavior: none; /* ìŠ¤í¬ë¡¤ ë°”ìš´ìŠ¤(ë‹¹ê²¨ì„œ ìƒˆë¡œê³ ì¹¨ ë“±) ë°©ì§€ */
            -webkit-tap-highlight-color: transparent; /* í„°ì¹˜ ì‹œ ë²ˆì©ì´ëŠ” ë°•ìŠ¤ ì œê±° */
        }

        /* í™”ë©´ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ & ë ˆì´ì•„ì›ƒ ì œì–´ */
        .screen { 
            display: none !important; 
            opacity: 0; 
            transition: opacity 0.3s ease-in-out;
            flex-direction: column;
            width: 100%;
            height: 100%;
        }
        
        .screen.active { 
            display: flex !important; 
            opacity: 1; 
        }

        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        .break-keep { word-break: keep-all; word-wrap: break-word; }

        /* ë­í‚¹ ìŠ¤íƒ€ì¼ */
        .rank-item { border-bottom: 1px solid #f8fafc; transition: background 0.1s; }
        .rank-item:last-child { border-bottom: none; }
        .rank-badge { font-style: italic; font-family: 'Pretendard', sans-serif; }

        .rank-1 { color: #eab308; text-shadow: 0 1px 0 rgba(234, 179, 8, 0.2); }
        .rank-2 { color: #94a3b8; }
        .rank-3 { color: #b45309; }

        .my-record { background-color: #eff6ff; position: relative; }
        .my-record::before {
            content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px;
            background-color: #2563eb; border-top-right-radius: 4px; border-bottom-right-radius: 4px;
        }

        /* ì„ íƒì§€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .option-btn {
            background-color: white;
            border: 1px solid #e2e8f0;
            color: #334155;
            font-weight: 700;
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 0 #cbd5e1, 0 2px 4px rgba(0,0,0,0.05);
            position: relative;
            top: 0;
            height: 100%;
            min-height: 80px; 
            display: flex;
            align-items: center;
            justify-content: center;
            /* í…ìŠ¤íŠ¸ ë“œë˜ê·¸ ë°©ì§€ */
            user-select: none;
            -webkit-user-select: none;
        }

        .option-btn:active { 
            top: 4px; 
            box-shadow: 0 0 0 #cbd5e1, inset 0 2px 4px rgba(0,0,0,0.05);
            background-color: #f1f5f9;
        }

        .option-btn.correct { 
            background-color: #3b82f6 !important; 
            border-color: #2563eb !important; 
            color: white !important; 
            box-shadow: 0 4px 0 #1d4ed8 !important;
            transform: scale(1.02);
        }

        .option-btn.wrong { 
            background-color: #ef4444 !important; 
            border-color: #dc2626 !important; 
            color: white !important;
            box-shadow: 0 4px 0 #b91c1c !important;
            animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake { 
            10%, 90% { transform: translate3d(-1px, 0, 0); } 
            20%, 80% { transform: translate3d(2px, 0, 0); } 
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 
            40%, 60% { transform: translate3d(4px, 0, 0); } 
        }

        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop-in { animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

        @keyframes fadeInUp { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        .animate-fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }

        .modal-active #modal-backdrop { display: flex; opacity: 1; }
        .modal-active #modal-backdrop > div { transform: scale(1); }

        /* ì•„ì´í° ë…¸ì¹˜ ëŒ€ì‘ íŒ¨ë”© */
        .app-container {
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .loader {
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top: 3px solid #3498db;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    
    <meta name="theme-color" content="#ffffff">
</head>
<!-- 
    [ëª¨ë°”ì¼ ìµœì í™” ìˆ˜ì • ì‚¬í•­]
    1. touch-none ì œê±° -> touch-manipulation ë³€ê²½: ë­í‚¹ ìŠ¤í¬ë¡¤ì€ ê°€ëŠ¥í•˜ê²Œ í•˜ë˜, ë”ë¸”íƒ­ í™•ëŒ€ ì§€ì—°ì€ ì œê±°
    2. select-none: í…ìŠ¤íŠ¸ ë“œë˜ê·¸ ë°©ì§€
    3. overscroll-behavior: none (CSS): ë‹¹ê²¨ì„œ ìƒˆë¡œê³ ì¹¨ ë°©ì§€
-->
<body class="bg-slate-800 font-sans select-none overflow-hidden touch-manipulation h-[100dvh] w-full flex items-center justify-center">

    <div class="app-container relative w-full h-full sm:h-[95vh] sm:max-h-[900px] sm:max-w-3xl sm:rounded-[32px] bg-white shadow-2xl overflow-hidden flex flex-col sm:border-[8px] sm:border-slate-700 ring-1 ring-white/10 transition-all duration-300">
        
        <!-- ìƒë‹¨ ë°°ë„ˆ -->
        <div id="season-banner" class="w-full text-center py-2 text-[10px] sm:text-xs font-black tracking-widest uppercase bg-black text-white shrink-0 z-20">
            LOADING...
        </div>

        <!-- ë©”ì¸ í—¤ë” -->
        <div id="main-header" class="pt-8 px-6 text-center z-10 shrink-0 transition-all duration-300">
            <h1 class="text-4xl sm:text-5xl font-black italic tracking-tighter text-slate-900 leading-none drop-shadow-sm">
                <span class="text-blue-600">ìˆ˜ë‹¨ë¹„</span><br>ë‹¨ì–´ ì±Œë¦°ì§€
            </h1>
            <p class="text-[11px] sm:text-sm text-slate-400 font-bold mt-2 tracking-[0.2em] uppercase">Season 2</p>
        </div>

        <!-- 1. ë¡œë¹„ í™”ë©´ -->
        <div id="screen-lobby" class="screen active flex-grow px-6 pb-8 pt-4 overflow-y-auto scrollbar-hide">
            
            <div class="bg-slate-50 rounded-2xl p-4 border border-slate-100 text-center mb-6 shadow-sm shrink-0 sm:py-6">
                <span id="season-week" class="inline-block bg-blue-600 text-white text-xs sm:text-sm font-black px-4 py-1.5 rounded-full mb-2 shadow-md shadow-blue-200">WEEK ?</span>
                <p id="season-date" class="text-xs sm:text-sm text-slate-500 font-medium mt-1">...</p>
            </div>

            <div class="mb-4 shrink-0 max-w-md mx-auto w-full">
                <label class="text-[10px] font-bold text-slate-400 ml-2 mb-1 block uppercase tracking-wider">Player Name</label>
                <!-- autocomplete, spellcheck off: ë¶ˆí•„ìš”í•œ ìë™ì™„ì„±/ë°‘ì¤„ ì œê±° -->
                <input type="text" id="nickname-input" placeholder="ë‹‰ë„¤ì„ (2~8ì)" maxlength="8" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                    class="w-full bg-slate-100 border-2 border-transparent focus:border-blue-500 rounded-2xl p-4 text-center text-slate-900 font-black text-lg focus:bg-white outline-none transition-all placeholder-slate-400 shadow-inner">
            </div>

            <div class="flex-grow flex flex-col bg-white border border-slate-200 rounded-2xl overflow-hidden relative mb-4 shadow-sm min-h-0">
                <div class="flex border-b border-slate-100 bg-slate-50 shrink-0">
                    <button id="tab-weekly" class="flex-1 py-3 text-xs sm:text-sm font-black text-blue-600 border-b-2 border-blue-600 bg-white transition-colors">ì£¼ê°„ ë­í‚¹</button>
                    <button id="tab-total" class="flex-1 py-3 text-xs sm:text-sm font-bold text-slate-400 hover:text-slate-600 transition-colors">ëª…ì˜ˆì˜ ì „ë‹¹</button>
                </div>
                <!-- ë­í‚¹ ë¦¬ìŠ¤íŠ¸ (ëª¨ë°”ì¼ ìŠ¤í¬ë¡¤ í•„ìˆ˜ ì˜ì—­) -->
                <div id="ranking-list" class="flex-grow overflow-y-auto p-0 scrollbar-hide bg-white relative touch-pan-y">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 opacity-20"></div>
                    </div>
                </div>
            </div>

            <button id="btn-start" class="w-full max-w-md mx-auto py-5 rounded-2xl bg-blue-600 text-white font-black text-xl shadow-lg shadow-blue-200 hover:bg-blue-500 hover:scale-[1.02] active:scale-95 transition-all relative overflow-hidden group shrink-0">
                <span class="relative z-10">GAME START</span>
                <div class="absolute inset-0 bg-white/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500 skew-x-[-20deg]"></div>
            </button>
            
            <button id="btn-share-revive" class="hidden w-full max-w-md mx-auto py-4 rounded-2xl bg-[#FEE500] text-[#191919] font-black text-lg shadow-lg hover:bg-[#FDD835] active:scale-95 transition-all flex items-center justify-center gap-2 shrink-0">
                <span>âš¡ ê³µìœ í•˜ê³  ê¸°íšŒ ì–»ê¸°</span>
            </button>
        </div>

        <!-- 2. ê²Œì„ í™”ë©´ -->
        <div id="screen-game" class="screen px-6 pb-10 pt-6 relative">
            <div class="flex justify-between items-end mb-6 shrink-0 max-w-2xl mx-auto w-full">
                <div class="bg-white/80 backdrop-blur-sm px-5 py-2.5 rounded-2xl border border-slate-100 shadow-sm">
                    <span class="text-[10px] text-slate-400 block font-black tracking-widest">SCORE</span>
                    <span id="score-display" class="text-3xl font-black text-blue-600 tabular-nums leading-none">0</span>
                </div>
                <div class="text-right">
                    <div class="flex items-baseline gap-1 justify-end">
                        <span id="timer-display" class="text-5xl font-black text-slate-900 italic tracking-tighter tabular-nums leading-none">20</span>
                        <span class="text-xs font-bold text-slate-400">sec</span>
                    </div>
                </div>
            </div>
            
            <div class="w-full max-w-2xl mx-auto bg-slate-100 h-3 sm:h-4 rounded-full mb-8 overflow-hidden inner-shadow shrink-0">
                <div id="time-bar" class="h-full bg-gradient-to-r from-blue-400 to-blue-600 transition-all duration-100 ease-linear rounded-full shadow-[0_0_10px_rgba(37,99,235,0.3)]" style="width: 100%;"></div>
            </div>

            <div class="flex-grow flex flex-col items-center justify-center relative z-10 pb-4 min-h-0 w-full max-w-2xl mx-auto">
                <div class="mb-auto mt-auto text-center w-full">
                    <div id="freq-badge" class="inline-block mb-4 px-3 py-1 rounded-full bg-orange-50 text-orange-600 text-[10px] sm:text-xs font-black border border-orange-100 opacity-0 transition-opacity transform translate-y-2">
                        ğŸ”¥ ìˆ˜ëŠ¥ ê¸°ì¶œ 0íšŒ
                    </div>
                    <h2 id="word-display" class="text-5xl sm:text-6xl font-black text-slate-900 tracking-tight break-keep leading-tight drop-shadow-sm px-2 animate-pop-in">
                        Ready
                    </h2>
                </div>
                
                <div id="options-container" class="w-full grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mt-8 mb-4">
                    <!-- JSë¡œ ë²„íŠ¼ ìƒì„± -->
                </div>
            </div>
        </div>

        <!-- 3. ê²°ê³¼ í™”ë©´ -->
        <div id="screen-result" class="screen p-8 items-center justify-center text-center relative bg-slate-900 text-white overflow-hidden">
            <div class="absolute inset-0 opacity-30 bg-[radial-gradient(#ffffff33_1px,transparent_1px)] [background-size:16px_16px]"></div>
            <div class="absolute top-0 left-0 w-full h-32 bg-gradient-to-b from-slate-900 to-transparent z-10"></div>
            <div class="absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-slate-900 to-transparent z-10"></div>

            <div class="relative z-20 w-full max-w-md mx-auto mb-8 animate-fade-in-up flex flex-col items-center">
                <p class="text-blue-400 text-[10px] font-black tracking-[0.5em] mb-2 uppercase">Game Over</p>
                <h2 class="text-3xl font-black italic text-white mb-8">FINAL SCORE</h2>

                <div class="bg-white/5 border border-white/10 w-full p-8 rounded-[32px] backdrop-blur-xl shadow-2xl relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-tr from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    
                    <p id="final-score" class="text-7xl font-black text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-yellow-500 italic tracking-tighter mb-4 drop-shadow-sm scale-100 transition-transform duration-300">0</p>
                    
                    <div id="result-badge" class="inline-block px-4 py-1.5 bg-blue-600 rounded-full text-xs font-bold text-white shadow-lg transform -rotate-2 border border-blue-400">
                        Rank Calculating...
                    </div>
                </div>
            </div>

            <div id="email-section" class="w-full max-w-md mx-auto mb-6 bg-white/5 p-1 rounded-2xl border border-white/10 relative z-20 backdrop-blur-md">
                <div class="p-4">
                    <p class="text-sm font-bold text-white mb-1">ğŸ ë­ì»¤ ë„ì „</p>
                    <p class="text-[10px] text-slate-400 mb-3 break-keep">1ë“±ì—ê²ŒëŠ” í‘¸ì§í•œ ìƒí’ˆì„ ë“œë¦½ë‹ˆë‹¤! ì´ë©”ì¼ ì£¼ì†Œë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”.</p>
                    <div class="flex gap-2">
                        <input type="email" id="email-input" placeholder="ì´ë©”ì¼ ì£¼ì†Œ" autocomplete="off" class="flex-1 bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-xs text-white focus:border-blue-400 outline-none transition-colors placeholder-slate-500">
                        <button id="btn-submit-email" class="bg-blue-600 px-4 py-2 rounded-xl text-xs font-bold hover:bg-blue-500 transition shadow-lg shrink-0">ë“±ë¡</button>
                    </div>
                </div>
            </div>

            <div class="flex w-full max-w-md mx-auto gap-3 mt-auto relative z-20 pb-4">
                <button id="btn-share" class="flex-1 py-4 bg-[#FEE500] text-[#191919] font-black rounded-2xl shadow-lg hover:bg-[#FDD835] hover:scale-[1.02] active:scale-95 transition-all text-sm">
                    ì¹´ì¹´ì˜¤ ê³µìœ 
                </button>
                <button id="btn-retry" class="flex-1 py-4 bg-white/10 text-white font-bold rounded-2xl hover:bg-white/20 hover:scale-[1.02] active:scale-95 transition-all backdrop-blur-sm border border-white/5 text-sm">
                    ë‹¤ì‹œ í•˜ê¸°
                </button>
            </div>
        </div>
    </div>

    <!-- ëª¨ë‹¬ -->
    <div id="modal-backdrop" class="fixed inset-0 bg-black/80 z-[100] hidden flex items-center justify-center px-6 backdrop-blur-sm opacity-0 transition-opacity duration-200">
        <div class="bg-white p-6 rounded-[32px] max-w-sm w-full text-center shadow-2xl transform scale-95 transition-transform duration-200 border-4 border-slate-100">
            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl">ğŸ“¢</div>
            <p id="modal-msg" class="text-slate-800 font-bold mb-6 break-keep leading-relaxed text-base"></p>
            <button onclick="closeModal()" class="w-full py-3.5 bg-slate-900 text-white font-bold rounded-2xl hover:scale-[1.02] active:scale-95 transition shadow-lg">í™•ì¸</button>
        </div>
    </div>

    <!-- Firebase SDK (í˜¸ìŠ¤íŒ… ìë™ ì—°ê²°ìš©) -->
    <script src="/__/firebase/9.23.0/firebase-app-compat.js"></script>
    <script src="/__/firebase/9.23.0/firebase-auth-compat.js"></script>
    <script src="/__/firebase/9.23.0/firebase-firestore-compat.js"></script>
    <script src="/__/firebase/init.js"></script>
    
    <script src="game.js?v=1.3"></script>
</body>
</html>